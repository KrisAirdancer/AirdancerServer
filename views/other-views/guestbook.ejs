<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krisaridancer - Guestbook</title>
    <link rel="stylesheet" href="../../styles.css">
    <link rel="shortcut icon" href="../../wind-icon.png" type="image/png">
</head>
<body>
    <div id="outer-div">
        <div id="content-div">
            <pre id="site-banner">
╦╔═╦═╗╦╔═╗╔═╗╦╦═╗╔╦╗╔═╗╔╗╔╔═╗╔═╗╦═╗
╠╩╗╠╦╝║╚═╗╠═╣║╠╦╝ ║║╠═╣║║║║  ║╣ ╠╦╝
╩ ╩╩╚═╩╚═╝╩ ╩╩╩╚══╩╝╩ ╩╝╚╝╚═╝╚═╝╩╚═
Guestbook</pre>

            <nav id="navbar">&lt;&lt;&lt;
                <a href="https://krisairdancer.com/">Home</a>
                <a href="https://krisairdancer.com/schub">SCHub</a>
                <a href="https://krisairdancer.com/blog">Blog</a>
                <a href="https://krisairdancer.com/vidya-clone">Vidya Clone</a>

            &gt;&gt;&gt;</nav>

            <form action="https://krisairdancer.com/sign-guestbook" id="guestbookForm">
                <p><strong>Handle*:</strong></p>
                <div>
                    <input name="handle" type="text" maxlength="20" id="handleInput" required>
                </div>
                <p><strong>Your Website:</strong></p>
                <div>
                    <input type="text" name="yourWebsite" maxlength="300" id="yourwebInput">
                </div>
                <p><strong>Your Favorite Website:</strong></p>
                <div>
                    <input type="text" name="favWebsite" maxlength="300" id="favwebInput">
                </div>
                <p><strong>Message*:</strong></p>
                <div>
                    <textarea name="message" cols="40" rows="3" maxlength="250" id="messageTextArea" required></textarea>
                </div>
                <button type="submit" id="submitButton">Sign</button>
            </form>

            <p id="timestampMessage">*timesamps in <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">UTC time</a></p>

            <!-- Entries HTML to be generated by below scripts and injected here -->
            <div id="guestbookEntries"></div>
        </div>
    </div>
</body>
<style>

    /***** Form Styles *****/

    input {
        background-color: var(--blue);
        color: var(--orange);
        border: 1px solid var(--orange);
        border-radius: 5px;
    }

    #guestbookForm {
        border: 2px solid var(--orange);
        border-radius: 10px;
        padding: 10px;
        max-width: 325px;
        margin: 10px 0px 5px 0px;
    }

    #handleInput {
        max-width: 315px;
        width: 100%;
    }

    #favwebInput {
        max-width: 315px;
        width: 100%;
    }

    #yourwebInput {
        max-width: 315px;
        width: 100%;
    }

    #messageTextArea {
        max-width: 315px;
        width: 100%;
        background-color: var(--blue);
        color: var(--orange);
        border: 1px solid var(--orange);
        border-radius: 5px;
        resize: vertical;
    }

    #submitButton {
        background-color: var(--blue);
        color: var(--orange);
        border: 1px solid var(--orange);
        border-radius: 5px;
    }

    #submitButton:active {
        color: #ffffff;
        border-color: white;
    }

    #submitButton:hover {
        cursor:pointer;
    }

    #timestampMessage {
        margin: 0px 0px 10px 0px;
    }

    /***** Entries Styles *****/

    p {
        margin: 5px 0px 5px 0px;
    }

    #guestbookEntries {
        max-width: 700px;
        /* width: 700px; */
        width: 100%;
    }

    .guestbookEntry {
        border: 2px solid var(--orange);
        border-radius: 10px;
        margin-bottom: 10px;
        padding: 5px 10px 5px 10px;
    }

    .guestbookHandleMessage {
        word-wrap: break-word;
    }

    @media screen and (width <= 395px) {
        p {
            font-size: 14px;
        }
    }

</style>
<script>

    try {
	    fetch('../guestbook.json')
	        .then(response => response.json())
	        .then(guestbook => {

                // Generate HTML of guestbook entries

                let guestbookHTML = [];

	            guestbook.forEach(entry => {

                    let entryHTML = [];

                    entryHTML.push('<div class="guestbookEntry">');
                    entryHTML.push(`<p class="guestbookHandleMessage"><strong>${entry.handle}:</strong> ${entry.message}</p>`);

                    if (entry.yourWebsite !== '' && entry.yourWebsite !== undefined && entry.yourWebsite !== null)
                    {
                        entryHTML.push(`<p><strong>Website:</strong> <a href="${entry.yourWebsite}">${entry.yourWebsite}</a></p>`);
                    }

                    if (entry.favWebsite !== '' && entry.favWebsite !== undefined && entry.favWebsite !== null)
                    {
                        entryHTML.push(`<p><strong>Favorite Website:</strong> <a href="${entry.yourWebsite}">${entry.yourWebsite}</a></p>`);
                    }

                    entryHTML.push(`<p>~ ${entry.timestamp} ~</p>`);
                    entryHTML.push('</div>');

                    guestbookHTML.push(entryHTML.join(''));
	            });

                guestbookHTML.reverse();

	            // Apply HTML to DOM
                
                let guestbookEntries = document.querySelector('#guestbookEntries');

                if (guestbookHTML.length === 0)
                {
                    guestbookEntries.innerHTML = '<p>No entries yet. Add one!</p>';
                }
                else
                {
                    guestbookEntries.innerHTML = guestbookHTML.join('');
                }
	
	        });
    }
    catch (error)
    {
        guestbookEntries.innerHTML = '<p>No entries yet. Add one!</p>';
    }

</script>
</html>